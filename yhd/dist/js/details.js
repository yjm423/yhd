"use strict";var baseUrl="http://localhost/project/yhd/yhd/";define(["jquery","cookie"],function(m,t){return{render:function(){var t=location.search.split("=")[1];m.ajax({url:baseUrl+"lib/details.php",type:"get",data:{id:t},dataType:"json",success:function(t){for(var i=t.url.split(","),n=t.typelist.split(","),s="",o="",c=0;c<i.length;c++)s+="\n                    <li><img src='"+i[c]+'\'\n                            alt=""></li>\n                    ';var e=!0,l=!1,r=void 0;try{for(var a,f=n[Symbol.iterator]();!(e=(a=f.next()).done);e=!0){var u=a.value;o+='\n                    <li style="border: 1px solid #e60021;">\n                            <img src="'+i[0]+'"\n                                alt="">\n                            <span>'+u+"</span>\n                            <b></b>\n                        </li>\n                    "}}catch(t){l=!0,r=t}finally{try{!e&&f.return&&f.return()}finally{if(l)throw r}}m(".sImg").attr({src:i[1]}),m(".bImg").attr({src:i[1]}),m(".pics ul").append(s),m(".main_content  h1").html(t.title),m(".main_content  .price").html(t.pricenew),m(".sel .item").append(o)}})},amplify:function(){m(".img_wrap ul").on("click","li",function(){m(".sImg").attr({src:m(this).find("img").attr("src")}),m(".bImg").attr({src:m(this).find("img").attr("src")})}),m(".s_img").on("mouseover",function(){m(".sf").css("display","block"),m(".bf").css("display","block"),m(document).on("mousemove",function(t){var i=t.clientX-m(".s_img").offset().left-m(".sf").width()/2,n=t.clientY-m(".s_img").offset().top-m(".sf").width()/2+m(document).scrollTop();m(".sf").css("top",n),i<0?i=0:i>=m(".s_img").width()-m(".sf").width()&&(i=m(".s_img").width()-m(".sf").width()),m(".sf").css("left",i),n<0?n=0:n>=m(".s_img").height()-m(".sf").height()&&(n=m(".s_img").height()-m(".sf").height()),m(".sf").css("top",n),m(".bImg").css("left",-m(".bf").width()/m(".sf").width()*i),m(".bImg").css("top",-m(".bf").width()/m(".sf").width()*n)})}),m(".s_img").on("mouseout",function(){m(".sf").css("display","none"),m(".bf").css("display","none")})},tabSwitch:function(){m(".pics .next").on("click",function(){var t=m(".img_wrap li").length;m(".img_wrap ul").css("left","-=68"),m(".img_wrap ul").offset().left<68*-(t-5)&&m(".img_wrap ul").css("left",68*-(t-5)),console.log(m(".img_wrap ul").offset().left)}),m(".pics .prev").on("click",function(){0<m(".img_wrap ul").offset().left?m(".img_wrap ul").css("left",0):m(".img_wrap ul").css("left","+=68")})},addgood:function(){var s=1;m(".num_btn .add").on("click",function(){s++,console.log(m(".num").val(s))}),m(".num_btn .reduce").on("click",function(){--s<1&&(s=1),console.log(m(".num").val(s))}),m(".join_cart .btn").on("click",function(){var i=location.search.split("=")[1],t=m.cookie("shop");console.log(t);var n={id:i,price:m(".main_content  .price").html(),num:m(".num").val()};t?(t=JSON.parse(t)).some(function(t){return t.id==i})?t.forEach(function(t){t.id==i&&(t.num=s)}):t.push(n):(t=[]).push(n),m.cookie("shop",JSON.stringify(t))})}}});